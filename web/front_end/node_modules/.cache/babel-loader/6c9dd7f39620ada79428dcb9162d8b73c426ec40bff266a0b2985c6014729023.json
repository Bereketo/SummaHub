{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\eyeru\\\\Desktop\\\\front_end\\\\src\\\\pages\\\\Login\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useContext, useEffect } from \"react\";\nimport AuthContext from \"../../context/AuthProvider\";\nimport \"./Login.css\";\nimport FormInputLogin from \"./components/formInputLogin\";\nimport LoginInputs from \"./LoginInputs\";\nimport axios from \"../../api/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login_url = \"/auth\";\nfunction Login() {\n  _s();\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const errRef = useRef();\n  const [errMsg, setErrMsg] = useState(\"\");\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  // useEffect (()=>{useRef.current.focus();} , [])\n  useEffect(() => {\n    setErrMsg(\"\");\n  }, [values.email, values.password]);\n\n  // const [success, setSuccess] = useState(false);\n  const handleSubmit = async e => {\n    try {\n      var _response$data, _response$data2;\n      const response = await axios.post(Login_url, JSON.stringify({\n        email: values.email,\n        password: values.password\n      }), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: true\n      });\n      console.log(JSON.stringify(response === null || response === void 0 ? void 0 : response.data));\n      const accessToken = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.accessToken;\n      const roles = response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.roles;\n      setValues({\n        email: \"\",\n        password: \"\"\n      });\n      setAuth({\n        email: values.email,\n        password: values.password,\n        roles,\n        accessToken\n      });\n    } catch (err) {\n      var _err$response, _err$response2;\n      if (!(err !== null && err !== void 0 && err.response)) {\n        setErrMsg(\"No Server Response\");\n      } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n        setErrMsg(\"Missing Username or password\");\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n        setErrMsg(\"Unauthorized\");\n      } else {\n        setErrMsg(\"Unable to login\");\n      }\n      errRef.current.focus();\n    }\n    e.preventDefault();\n  };\n  const handleChange = e => {\n    setValues({\n      ...values,\n      [e.target.name]: e.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loginWrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        ref: errRef,\n        className: errMsg ? \"errmsg\" : \"offscreen\",\n        \"aria-live\": \"assertive\",\n        children: [errMsg, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"logo\",\n        src: \"./images/logo.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), LoginInputs.map(input => /*#__PURE__*/_jsxDEV(FormInputLogin, {\n        ...input,\n        value: values[input.name],\n        onChange: handleChange\n      }, input.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }, this)), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"\",\n        children: \" forgot your password? \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \" Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", \"Don't have an account? \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"\",\n          children: \" SignUp Here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"tjT2ZlSb2D11vlsb6ULoNW3vJIA=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useRef","useState","useContext","useEffect","AuthContext","FormInputLogin","LoginInputs","axios","jsxDEV","_jsxDEV","Login_url","Login","_s","values","setValues","email","password","errRef","errMsg","setErrMsg","setAuth","handleSubmit","e","_response$data","_response$data2","response","post","JSON","stringify","headers","withCredentials","console","log","data","accessToken","roles","err","_err$response","_err$response2","status","current","focus","preventDefault","handleChange","target","name","value","className","children","onSubmit","ref","fileName","_jsxFileName","lineNumber","columnNumber","src","map","input","onChange","id","href","_c","$RefreshReg$"],"sources":["C:/Users/eyeru/Desktop/front_end/src/pages/Login/Login.jsx"],"sourcesContent":["import React, { useRef, useState, useContext, useEffect } from \"react\";\r\nimport AuthContext from \"../../context/AuthProvider\";\r\nimport \"./Login.css\";\r\nimport FormInputLogin from \"./components/formInputLogin\";\r\nimport LoginInputs from \"./LoginInputs\";\r\nimport axios from \"../../api/axios\";\r\nconst Login_url = \"/auth\";\r\nfunction Login() {\r\n  const [values, setValues] = useState({email: \"\",password: \"\", });\r\n  const errRef = useRef();\r\n  const [errMsg, setErrMsg] = useState(\"\");\r\n  const { setAuth } = useContext(AuthContext);\r\n  // useEffect (()=>{useRef.current.focus();} , [])\r\n  useEffect(() => { setErrMsg(\"\");}, [values.email, values.password]);\r\n  \r\n  // const [success, setSuccess] = useState(false);\r\n  const handleSubmit = async (e) => {\r\n    try {\r\n      const response = await axios.post(\r\n        Login_url,\r\n        JSON.stringify({ email: values.email, password: values.password }),\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          withCredentials: true,\r\n        }\r\n      );\r\n      console.log(JSON.stringify(response?.data));\r\n      const accessToken = response?.data?.accessToken;\r\n      const roles = response?.data?.roles;\r\n      setValues({ email: \"\",\r\n        password: \"\",\r\n      });\r\n      setAuth({\r\n        email: values.email,\r\n        password: values.password,\r\n        roles,\r\n        accessToken,\r\n      });\r\n    } catch (err) {\r\n      if (!err?.response) {\r\n        setErrMsg(\"No Server Response\");\r\n      } else if (err.response?.status === 400) {\r\n        setErrMsg(\"Missing Username or password\");\r\n      } else if (err.response?.status === 401) {\r\n        setErrMsg(\"Unauthorized\");\r\n      } else {\r\n        setErrMsg(\"Unable to login\");\r\n      }\r\n      errRef.current.focus();\r\n    }\r\n\r\n    e.preventDefault();\r\n  };\r\n  const handleChange = (e) => {\r\n    setValues({ ...values, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n        <div className=\"loginWrapper\">\r\n          <form onSubmit={handleSubmit}>\r\n            <p\r\n              ref={errRef}\r\n              className={errMsg ? \"errmsg\" : \"offscreen\"}\r\n              aria-live=\"assertive\"\r\n            >\r\n              {errMsg}{\" \"}\r\n            </p>\r\n            <img className=\"logo\" src=\"./images/logo.png\" />\r\n            {LoginInputs.map((input) => (\r\n              <FormInputLogin\r\n                key={input.id}\r\n                {...input}\r\n                value={values[input.name]}\r\n                onChange={handleChange}\r\n              />\r\n            ))}\r\n            <a href=\"\"> forgot your password? </a>\r\n            <button> Login</button>\r\n\r\n            <p>\r\n              {\" \"}\r\n              Don't have an account? <a href=\"\"> SignUp Here</a>\r\n            </p>\r\n          </form>\r\n        </div>\r\n\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}